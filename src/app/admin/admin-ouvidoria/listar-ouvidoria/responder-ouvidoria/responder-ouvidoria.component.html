<div class="ui dimmer modals page transition active">
    <div class="ui modal transition active">
        <app-confirmacao-reposta [header]="'Confirmação de resposta.'"
          [message]="msgInfo"
          [showModal]="showConfirmModal" 
          (cancel)="showConfirmModal = false" 
          (confirm)="sendRespostaOuvidoria(formResponder.value)">
        </app-confirmacao-reposta>

        <app-confirmacao-reposta [header]="'AVISO!'"
          [message]="msgInfo"
          [showModal]="showAviso" 
          [messageSucess]="showConfirmModal" 
          (confirm)="buttonModal()">
        </app-confirmacao-reposta>
      <app-loader *ngIf="showLoader"></app-loader>
      <i class="close icon" (click)="toggleState()"></i>
      <div class="header">
        Responder Ouvidoria
      </div>
      <div class="content">
        <form class="ui form" [formGroup]="formResponder" (submit)="confirm()">
          <div class="disabled field">
              <label>Segurado:</label>
              <input type="text" value="{{ ouvidoria.usuario.name }}">
            </div>
            <div class="disabled field">
              <label>Tipo de ouvidoria:</label>
              <input type="text" value="{{ ouvidoria.ouvidoriaTipo.descricao }}">
            </div>
            <div class="disabled field">
              <label>Descrição:</label>
              <textarea>{{ ouvidoria.descricao }}</textarea>
            </div>
            <div class="field">
              <label>Resposta:</label>
              <textarea formControlName="resposta" (keyup)="totalCaracteres = 255 - $event.target.value.length" maxlength="255"></textarea>
            </div>
            <div class="ui basic right aligned segment">
              <p [class.attention]="totalCaracteres <= 50">Caracteres restantes: {{ totalCaracteres }}</p>
            </div>
            <div *ngIf="showMessage" class="ui negative message">
              <i class="close icon" (click)="showMessage = false"></i>
              <p>{{ message }}</p>
            </div>
            <button class="ui teal button" [disabled]="formResponder.invalid" type="submit">Responder</button>
        </form>
      </div>
    </div>
  </div>